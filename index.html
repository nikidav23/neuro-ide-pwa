<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>neuro-ide - AI Code Editor</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#0d1117">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="neuro-ide">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(() => console.log('üöÄ PWA –≥–æ—Ç–æ–≤–æ –∫ —É—Å—Ç–∞–Ω–æ–≤–∫–µ!'))
                    .catch(err => console.log('Service Worker error:', err));
            });
        }
    </script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0d1117;
            color: #f0f6fc;
            height: 100vh;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Header */
        .header {
            background: #21262d;
            padding: 12px 16px;
            border-bottom: 1px solid #30363d;
            display: flex;
            align-items: center;
            justify-content: space-between;
            z-index: 100;
        }

        .logo {
            font-size: 18px;
            font-weight: 600;
            color: #58a6ff;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .install-btn {
            background: #238636;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            display: none;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: #21262d;
            border-bottom: 1px solid #30363d;
        }

        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: transparent;
            border: none;
            color: #7d8590;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .tab.active {
            color: #f0f6fc;
            background: #0d1117;
            border-bottom: 2px solid #58a6ff;
        }

        .tab:not(.active):hover {
            background: #30363d;
        }

        /* Tab Content */
        .tab-content {
            flex: 1;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        .tab-content.active {
            display: flex;
        }

        /* Code Editor */
        .editor-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 16px;
            overflow: hidden;
        }

        .editor {
            flex: 1;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 16px;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            color: #f0f6fc;
            resize: none;
            outline: none;
            line-height: 1.5;
            overflow-y: auto;
        }

        .editor-controls {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .btn {
            background: #58a6ff;
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
            min-height: 44px;
        }

        .btn:hover {
            background: #4491e6;
        }

        .btn.success {
            background: #238636;
        }

        .btn.success:hover {
            background: #2ea043;
        }

        .btn.danger {
            background: #da3633;
        }

        .btn.danger:hover {
            background: #b62324;
        }

        /* AI Chat */
        .ai-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 16px;
            overflow: hidden;
        }

        .chat-area {
            flex: 1;
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 16px;
            overflow-y: auto;
            margin-bottom: 12px;
        }

        .message {
            margin-bottom: 16px;
            padding: 12px;
            border-radius: 8px;
            line-height: 1.4;
        }

        .message.ai {
            background: #21262d;
            border-left: 4px solid #58a6ff;
        }

        .message.user {
            background: #58a6ff;
            color: white;
            margin-left: 20%;
        }

        .message.system {
            background: #1a1a1a;
            border-left: 4px solid #ffa500;
            color: #ffa500;
            font-style: italic;
        }

        .chat-input-container {
            display: flex;
            gap: 8px;
        }

        .chat-input {
            flex: 1;
            background: #21262d;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 12px;
            color: #f0f6fc;
            font-size: 16px;
            outline: none;
            min-height: 44px;
        }

        .chat-input::placeholder {
            color: #7d8590;
        }

        /* Preview */
        .preview-container {
            flex: 1;
            padding: 16px;
            overflow: hidden;
        }

        .preview-frame {
            width: 100%;
            height: 100%;
            border: 1px solid #30363d;
            border-radius: 8px;
            background: white;
        }

        /* Install Prompt */
        .install-prompt {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: #238636;
            color: white;
            padding: 16px;
            border-radius: 8px;
            display: none;
            z-index: 1000;
        }

        .install-prompt.show {
            display: block;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        .install-prompt-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
        }

        .install-prompt button {
            background: white;
            color: #238636;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .tab {
                font-size: 12px;
                padding: 10px 8px;
            }
            
            .editor-controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }

        /* Status indicators */
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }

        .status-online {
            background: #238636;
        }

        .status-offline {
            background: #da3633;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                üß† neuro-ide
                <span class="status-indicator status-offline" id="statusIndicator"></span>
            </div>
            <button class="install-btn" id="installBtn">üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Tabs -->
            <div class="tabs">
                <button class="tab active" onclick="switchTab('editor')">
                    ‚å®Ô∏è –†–µ–¥–∞–∫—Ç–æ—Ä
                </button>
                <button class="tab" onclick="switchTab('ai')">
                    ü§ñ AI
                </button>
                <button class="tab" onclick="switchTab('preview')">
                    üëÅÔ∏è –ü—Ä–µ–≤—å—é
                </button>
            </div>

            <!-- Editor Tab -->
            <div id="editor" class="tab-content active">
                <div class="editor-container">
                    <textarea class="editor" id="codeEditor" placeholder="// üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ neuro-ide!
// AI-—Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω

function createApp() {
    console.log('üì± –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ!');
    return '–ü—Ä–∏–≤–µ—Ç –∏–∑ neuro-ide!';
}

createApp();

// üí° –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
// ‚Ä¢ –ü–µ—Ä–µ–π—Ç–∏ –≤ AI –∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å —Å–æ–∑–¥–∞—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
// ‚Ä¢ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
// ‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø—Ä–µ–≤—å—é"></textarea>
                    
                    <div class="editor-controls">
                        <button class="btn" onclick="runCode()">
                            ‚ñ∂Ô∏è –ó–∞–ø—É—Å—Ç–∏—Ç—å
                        </button>
                        <button class="btn success" onclick="formatCode()">
                            ‚ú® –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="btn" onclick="saveCode()">
                            üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                        <button class="btn danger" onclick="clearEditor()">
                            üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>

            <!-- AI Tab -->
            <div id="ai" class="tab-content">
                <div class="ai-container">
                    <div class="chat-area" id="chatArea">
                        <div class="message ai">
                            <strong>ü§ñ neuro-ide AI</strong><br>
                            –ü—Ä–∏–≤–µ—Ç! –Ø –≤–∞—à AI –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω! üöÄ<br><br>
                            <strong>–ß—Ç–æ —É–º–µ—é:</strong><br>
                            ‚Ä¢ –°–æ–∑–¥–∞–≤–∞—Ç—å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∏–≥—Ä—ã<br>
                            ‚Ä¢ –ò—Å–ø—Ä–∞–≤–ª—è—Ç—å –æ—à–∏–±–∫–∏ –≤ –∫–æ–¥–µ<br>
                            ‚Ä¢ –û–±—ä—è—Å–Ω—è—Ç—å –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–¥<br>
                            ‚Ä¢ –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è<br><br>
                            <strong>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å:</strong><br>
                            ‚Ä¢ "—Å–æ–∑–¥–∞–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä"<br>
                            ‚Ä¢ "—Å–¥–µ–ª–∞–π –ø—Ä–æ—Å—Ç—É—é –∏–≥—Ä—É"<br>
                            ‚Ä¢ "–æ–±—ä—è—Å–Ω–∏ —ç—Ç–æ—Ç –∫–æ–¥"<br>
                            ‚Ä¢ "–∏—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫—É"
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <input type="text" class="chat-input" id="chatInput" 
                               placeholder="–û–ø–∏—à–∏—Ç–µ —á—Ç–æ —Å–æ–∑–¥–∞—Ç—å –∏–ª–∏ —Å–ø—Ä–æ—Å–∏—Ç–µ –æ –∫–æ–¥–µ..."
                               onkeypress="if(event.key==='Enter') sendMessage()">
                        <button class="btn" onclick="sendMessage()">
                            üöÄ –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                        </button>
                    </div>
                </div>
            </div>

            <!-- Preview Tab -->
            <div id="preview" class="tab-content">
                <div class="preview-container">
                    <iframe class="preview-frame" id="previewFrame" sandbox="allow-scripts"></iframe>
                </div>
            </div>
        </div>
    </div>

    <!-- Install Prompt -->
    <div class="install-prompt" id="installPrompt">
        <div class="install-prompt-content">
            <div>
                <strong>üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å neuro-ide?</strong><br>
                –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!
            </div>
            <div>
                <button onclick="installApp()">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button onclick="dismissInstall()" style="background: transparent; color: white;">–ü–æ–∑–∂–µ</button>
            </div>
        </div>
    </div>

    <script>
        // AI Engine - —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω
        class OfflineAI {
            constructor() {
                this.patterns = this.loadPatterns();
                this.memory = this.loadMemory();
            }

            loadPatterns() {
                return {
                    greetings: ['–ø—Ä–∏–≤–µ—Ç', 'hello', 'hi', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π'],
                    calculator: ['–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä', 'calculator', '–ø–æ—Å—á–∏—Ç–∞—Ç—å', '–≤—ã—á–∏—Å–ª–∏—Ç—å'],
                    game: ['–∏–≥—Ä–∞', 'game', '–∏–≥—Ä–∞—Ç—å', '—Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏–µ'],
                    website: ['—Å–∞–π—Ç', 'website', '—Å—Ç—Ä–∞–Ω–∏—Ü–∞', 'page'],
                    help: ['–ø–æ–º–æ—â—å', 'help', '—á—Ç–æ —É–º–µ–µ—à—å', '–∫–æ–º–∞–Ω–¥—ã'],
                    error: ['–æ—à–∏–±–∫–∞', 'error', '–∏—Å–ø—Ä–∞–≤—å', 'fix', '–±–∞–≥'],
                    explain: ['–æ–±—ä—è—Å–Ω–∏', 'explain', '–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç', '—á—Ç–æ –¥–µ–ª–∞–µ—Ç']
                };
            }

            loadMemory() {
                const saved = localStorage.getItem('neuro-ide-memory');
                return saved ? JSON.parse(saved) : {
                    interactions: 0,
                    preferences: {},
                    codeHistory: []
                };
            }

            saveMemory() {
                localStorage.setItem('neuro-ide-memory', JSON.stringify(this.memory));
            }

            analyze(input) {
                const text = input.toLowerCase();
                
                for (let [category, keywords] of Object.entries(this.patterns)) {
                    if (keywords.some(keyword => text.includes(keyword))) {
                        return category;
                    }
                }
                
                return 'general';
            }

            respond(input, context = '') {
                this.memory.interactions++;
                const intent = this.analyze(input);
                
                switch (intent) {
                    case 'calculator':
                        return this.createCalculator();
                    case 'game':
                        return this.createGame();
                    case 'website':
                        return this.createWebsite();
                    case 'help':
                        return this.showHelp();
                    case 'error':
                        return this.helpWithError(context);
                    case 'explain':
                        return this.explainCode(context);
                    default:
                        return this.generalResponse();
                }
            }

            createCalculator() {
                const code = `<!DOCTYPE html>
<html>
<head>
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
    <style>
        body { font-family: Arial; background: #f0f0f0; padding: 20px; }
        .calculator { max-width: 300px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .display { width: 100%; height: 60px; font-size: 24px; text-align: right; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .buttons { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        button { height: 50px; font-size: 18px; border: none; border-radius: 5px; cursor: pointer; transition: background 0.2s; }
        .num { background: #f8f9fa; }
        .num:hover { background: #e9ecef; }
        .op { background: #007bff; color: white; }
        .op:hover { background: #0056b3; }
        .clear { background: #dc3545; color: white; }
        .clear:hover { background: #c82333; }
        .equals { background: #28a745; color: white; }
        .equals:hover { background: #218838; }
    </style>
</head>
<body>
    <div class="calculator">
        <input type="text" class="display" id="display" readonly>
        <div class="buttons">
            <button class="clear" onclick="clearDisplay()">C</button>
            <button class="op" onclick="appendToDisplay('/')">/</button>
            <button class="op" onclick="appendToDisplay('*')">*</button>
            <button class="op" onclick="deleteLast()">‚å´</button>
            
            <button class="num" onclick="appendToDisplay('7')">7</button>
            <button class="num" onclick="appendToDisplay('8')">8</button>
            <button class="num" onclick="appendToDisplay('9')">9</button>
            <button class="op" onclick="appendToDisplay('-')">-</button>
            
            <button class="num" onclick="appendToDisplay('4')">4</button>
            <button class="num" onclick="appendToDisplay('5')">5</button>
            <button class="num" onclick="appendToDisplay('6')">6</button>
            <button class="op" onclick="appendToDisplay('+')">+</button>
            
            <button class="num" onclick="appendToDisplay('1')">1</button>
            <button class="num" onclick="appendToDisplay('2')">2</button>
            <button class="num" onclick="appendToDisplay('3')">3</button>
            <button class="equals" onclick="calculate()" rowspan="2">=</button>
            
            <button class="num" onclick="appendToDisplay('0')" colspan="2">0</button>
            <button class="num" onclick="appendToDisplay('.')">.</button>
        </div>
    </div>

    <script>
        let currentInput = '0';
        
        function updateDisplay() {
            document.getElementById('display').value = currentInput;
        }
        
        function appendToDisplay(value) {
            if (currentInput === '0' && value !== '.') {
                currentInput = value;
            } else {
                currentInput += value;
            }
            updateDisplay();
        }
        
        function clearDisplay() {
            currentInput = '0';
            updateDisplay();
        }
        
        function deleteLast() {
            if (currentInput.length > 1) {
                currentInput = currentInput.slice(0, -1);
            } else {
                currentInput = '0';
            }
            updateDisplay();
        }
        
        function calculate() {
            try {
                currentInput = eval(currentInput).toString();
                updateDisplay();
            } catch (error) {
                currentInput = '–û—à–∏–±–∫–∞';
                updateDisplay();
                setTimeout(() => {
                    currentInput = '0';
                    updateDisplay();
                }, 1500);
            }
        }
        
        updateDisplay();
    </script>
</body>
</html>`;

                document.getElementById('codeEditor').value = code;
                this.saveMemory();
                
                return '‚ú® –°–æ–∑–¥–∞–ª –∫—Ä–∞—Å–∏–≤—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä! –ö–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ü—Ä–µ–≤—å—é" —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';
            }

            createGame() {
                const code = `<!DOCTYPE html>
<html>
<head>
    <title>–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</title>
    <style>
        body { font-family: Arial; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .game { background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; text-align: center; backdrop-filter: blur(10px); }
        input { padding: 15px; font-size: 18px; border: none; border-radius: 8px; margin: 10px; text-align: center; }
        button { padding: 15px 30px; font-size: 16px; background: #ff6b6b; color: white; border: none; border-radius: 8px; cursor: pointer; margin: 10px; }
        button:hover { background: #ff5252; }
        .attempts { margin: 20px 0; font-size: 18px; }
        .hint { font-size: 20px; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="game">
        <h1>üéØ –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ!</h1>
        <p>–Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100</p>
        
        <input type="number" id="guessInput" placeholder="–í–∞—à–µ —á–∏—Å–ª–æ" min="1" max="100">
        <br>
        <button onclick="makeGuess()">üöÄ –£–≥–∞–¥–∞—Ç—å!</button>
        <button onclick="newGame()">üîÑ –ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
        
        <div class="attempts" id="attempts">–ü–æ–ø—ã—Ç–æ–∫: 0</div>
        <div class="hint" id="hint">–£–¥–∞—á–∏! üçÄ</div>
    </div>

    <script>
        let secretNumber = Math.floor(Math.random() * 100) + 1;
        let attempts = 0;
        
        function makeGuess() {
            const guess = parseInt(document.getElementById('guessInput').value);
            const hintElement = document.getElementById('hint');
            const attemptsElement = document.getElementById('attempts');
            
            if (isNaN(guess) || guess < 1 || guess > 100) {
                hintElement.textContent = '‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100!';
                return;
            }
            
            attempts++;
            attemptsElement.textContent = '–ü–æ–ø—ã—Ç–æ–∫: ' + attempts;
            
            if (guess === secretNumber) {
                hintElement.innerHTML = 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã —É–≥–∞–¥–∞–ª–∏!<br>–ß–∏—Å–ª–æ –±—ã–ª–æ: ' + secretNumber + '<br>–ü–æ–ø—ã—Ç–æ–∫: ' + attempts;
                document.getElementById('guessInput').disabled = true;
            } else if (guess < secretNumber) {
                hintElement.textContent = 'üìà –ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ!';
            } else {
                hintElement.textContent = 'üìâ –ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ!';
            }
            
            document.getElementById('guessInput').value = '';
        }
        
        function newGame() {
            secretNumber = Math.floor(Math.random() * 100) + 1;
            attempts = 0;
            document.getElementById('attempts').textContent = '–ü–æ–ø—ã—Ç–æ–∫: 0';
            document.getElementById('hint').textContent = '–£–¥–∞—á–∏! üçÄ';
            document.getElementById('guessInput').disabled = false;
            document.getElementById('guessInput').value = '';
        }
        
        document.getElementById('guessInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                makeGuess();
            }
        });
    </script>
</body>
</html>`;

                document.getElementById('codeEditor').value = code;
                this.saveMemory();
                
                return 'üéÆ –°–æ–∑–¥–∞–ª —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—É—é –∏–≥—Ä—É "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"! –ö—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞–º–∏. –ö–æ–¥ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –ø—Ä–µ–≤—å—é!';
            }

            createWebsite() {
                const code = `<!DOCTYPE html>
<html>
<head>
    <title>–ú–æ—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial; background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4); background-size: 400% 400%; animation: gradient 15s ease infinite; }
        @keyframes gradient { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        .container { max-width: 800px; margin: 0 auto; padding: 20px; }
        .card { background: rgba(255,255,255,0.9); padding: 30px; border-radius: 15px; margin: 20px 0; backdrop-filter: blur(10px); }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        .feature { display: flex; align-items: center; margin: 15px 0; }
        .feature-icon { font-size: 24px; margin-right: 15px; }
        .btn { background: #ff6b6b; color: white; padding: 15px 30px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; }
        .btn:hover { background: #ff5252; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>üöÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
            <p style="text-align: center; font-size: 18px; color: #666; margin-bottom: 30px;">
                –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫—Ä–∞—Å–∏–≤—ã–º –¥–∏–∑–∞–π–Ω–æ–º
            </p>
            
            <div class="feature">
                <div class="feature-icon">‚ú®</div>
                <div>–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω</div>
            </div>
            
            <div class="feature">
                <div class="feature-icon">üì±</div>
                <div>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</div>
            </div>
            
            <div class="feature">
                <div class="feature-icon">üé®</div>
                <div>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ CSS —ç—Ñ—Ñ–µ–∫—Ç—ã</div>
            </div>
            
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn" onclick="showMessage()">üéâ –ù–∞–∂–º–∏ –º–µ–Ω—è!</button>
            </div>
        </div>
    </div>

    <script>
        function showMessage() {
            alert('üéä –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í–∞—à–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ!');
        }
    </script>
</body>
</html>`;

                document.getElementById('codeEditor').value = code;
                this.saveMemory();
                
                return 'üåü –°–æ–∑–¥–∞–ª –∫—Ä–∞—Å–∏–≤—É—é –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ñ–æ–Ω–æ–º! –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω –≥–æ—Ç–æ–≤ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ!';
            }

            showHelp() {
                return `üí° <strong>–ö–æ–º–∞–Ω–¥—ã neuro-ide AI:</strong><br><br>
                üéØ <strong>–°–æ–∑–¥–∞–Ω–∏–µ:</strong><br>
                ‚Ä¢ "—Å–æ–∑–¥–∞–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä" - —Ä–∞–±–æ—á–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä<br>
                ‚Ä¢ "—Å–¥–µ–ª–∞–π –∏–≥—Ä—É" - –∏–≥—Ä–∞ "—É–≥–∞–¥–∞–π —á–∏—Å–ª–æ"<br>
                ‚Ä¢ "—Å–æ–∑–¥–∞–π —Å–∞–π—Ç" - –∫—Ä–∞—Å–∏–≤–∞—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞<br><br>
                
                üîß <strong>–ü–æ–º–æ—â—å —Å –∫–æ–¥–æ–º:</strong><br>
                ‚Ä¢ "–∏—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫—É" - –∞–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ<br>
                ‚Ä¢ "–æ–±—ä—è—Å–Ω–∏ –∫–æ–¥" - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ<br>
                ‚Ä¢ "—É–ª—É—á—à–∏ –∫–æ–¥" - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è<br><br>
                
                üì± <strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</strong><br>
                ‚Ä¢ –†–∞–±–æ—Ç–∞—é –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Ñ–ª–∞–π–Ω<br>
                ‚Ä¢ –ó–∞–ø–æ–º–∏–Ω–∞—é –Ω–∞—à–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã<br>
                ‚Ä¢ –ü–æ—Å—Ç–æ—è–Ω–Ω–æ —É—á—É—Å—å –æ—Ç –≤–∞—Å`;
            }

            helpWithError(code) {
                if (!code.trim()) {
                    return 'üîç –ü–æ–∫–∞–∂–∏—Ç–µ –∫–æ–¥ —Å –æ—à–∏–±–∫–æ–π, –∏ —è –ø–æ–º–æ–≥—É –∏—Å–ø—Ä–∞–≤–∏—Ç—å!';
                }
                
                const errors = [];
                if (code.includes('function') && !code.includes('{')) {
                    errors.push('–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ —É —Ñ—É–Ω–∫—Ü–∏–∏');
                }
                if (code.includes('console.log') && !code.includes(';')) {
                    errors.push('–ü—Ä–æ–ø—É—â–µ–Ω–∞ —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π');
                }
                
                if (errors.length > 0) {
                    return `üîß –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:<br>‚Ä¢ ${errors.join('<br>‚Ä¢ ')}<br><br>–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –∏—Å–ø—Ä–∞–≤–∏–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏?`;
                }
                
                return '‚úÖ –ö–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ.';
            }

            explainCode(code) {
                if (!code.trim()) {
                    return 'üí≠ –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä, –∏ —è –æ–±—ä—è—Å–Ω—é –∫–∞–∫ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç!';
                }
                
                return `üß† <strong>–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞:</strong><br><br>
                üìù –í–∞—à –∫–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç ${code.split('\n').length} —Å—Ç—Ä–æ–∫<br>
                üîß –§—É–Ω–∫—Ü–∏–π: ${(code.match(/function/g) || []).length}<br>
                üì¶ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö: ${(code.match(/let |const |var /g) || []).length}<br><br>
                
                üí° <strong>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥:</strong><br>
                –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ...`;
            }

            generalResponse() {
                const responses = [
                    'üí≠ –ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ–∑–¥–∞—Ç—å?',
                    'üöÄ –ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å! –û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∑–∞–¥–∞—á—É –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ.',
                    '‚ú® –î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —á—Ç–æ-—Ç–æ –ø–æ—Ç—Ä—è—Å–∞—é—â–µ–µ! –ß—Ç–æ –∏–º–µ–µ—Ç–µ –≤ –≤–∏–¥—É?',
                    'üéØ –ü–æ–Ω—è—Ç–Ω–æ! –£—Ç–æ—á–Ω–∏—Ç–µ –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –∫–æ–¥ –Ω—É–∂–µ–Ω?'
                ];
                
                return responses[Math.floor(Math.random() * responses.length)];
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const ai = new OfflineAI();
        let deferredPrompt;

        // PWA Installation
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').classList.add('show');
            document.getElementById('installBtn').style.display = 'block';
        });

        function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        addMessage('‚úÖ neuro-ide —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!', 'system');
                    }
                    deferredPrompt = null;
                    document.getElementById('installPrompt').classList.remove('show');
                });
            }
        }

        function dismissInstall() {
            document.getElementById('installPrompt').classList.remove('show');
        }

        // Tabs
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            if (tabName === 'preview') {
                updatePreview();
            }
        }

        // Editor functions
        function runCode() {
            const code = document.getElementById('codeEditor').value;
            
            if (code.trim().startsWith('<!DOCTYPE html') || code.trim().startsWith('<html')) {
                updatePreview();
                switchTab('preview');
                addMessage('‚úÖ HTML –∫–æ–¥ –∑–∞–ø—É—â–µ–Ω! –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø—Ä–µ–≤—å—é.', 'system');
            } else {
                try {
                    eval(code);
                    addMessage('‚úÖ JavaScript –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'system');
                } catch (error) {
                    addMessage(`‚ùå –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ${error.message}`, 'system');
                }
            }
        }

        function formatCode() {
            const editor = document.getElementById('codeEditor');
            let code = editor.value;
            
            code = code.replace(/;/g, ';\n')
                      .replace(/{/g, '{\n')
                      .replace(/}/g, '\n}')
                      .replace(/\n\s*\n/g, '\n');
            
            editor.value = code;
            addMessage('‚ú® –ö–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω!', 'system');
        }

        function saveCode() {
            const code = document.getElementById('codeEditor').value;
            localStorage.setItem('neuro-ide-code', code);
            addMessage('üíæ –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ!', 'system');
        }

        function clearEditor() {
            if (confirm('–û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä? –ù–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –ø–æ—Ç–µ—Ä—è–Ω—ã.')) {
                document.getElementById('codeEditor').value = '';
                addMessage('üóëÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä –æ—á–∏—â–µ–Ω.', 'system');
            }
        }

        // AI Chat
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            addMessage(message, 'user');
            input.value = '';
            
            addMessage('ü§î –î—É–º–∞—é...', 'ai-thinking');
            
            setTimeout(() => {
                const thinkingMsg = document.querySelector('.message.ai-thinking');
                if (thinkingMsg) thinkingMsg.remove();
                
                const codeContext = document.getElementById('codeEditor').value;
                const response = ai.respond(message, codeContext);
                addMessage(response, 'ai');
            }, 1000);
        }

        function addMessage(text, type) {
            const chatArea = document.getElementById('chatArea');
            const message = document.createElement('div');
            message.className = `message ${type.replace('-thinking', '')}`;
            
            if (type === 'ai-thinking') {
                message.className += ' ai-thinking';
                message.innerHTML = `<strong>ü§ñ neuro-ide AI:</strong><br>${text}`;
            } else if (type === 'ai') {
                message.innerHTML = `<strong>ü§ñ neuro-ide AI:</strong><br>${text}`;
            } else if (type === 'system') {
                message.innerHTML = `<strong>üì± –°–∏—Å—Ç–µ–º–∞:</strong><br>${text}`;
            } else {
                message.innerHTML = `<strong>üë§ –í—ã:</strong><br>${text}`;
            }
            
            chatArea.appendChild(message);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        // Preview
        function updatePreview() {
            const code = document.getElementById('codeEditor').value;
            const previewFrame = document.getElementById('previewFrame');
            
            if (code.trim().startsWith('<!DOCTYPE html') || code.trim().startsWith('<html')) {
                previewFrame.srcdoc = code;
            } else {
                previewFrame.srcdoc = `
                <!DOCTYPE html>
                <html>
                <head>
                    <title>JavaScript Output</title>
                    <style>
                        body { font-family: Arial; padding: 20px; background: #f5f5f5; }
                        .output { background: white; padding: 15px; border-radius: 8px; margin: 10px 0; }
                    </style>
                </head>
                <body>
                    <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è JavaScript:</h3>
                    <div class="output" id="output">–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å" –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ</div>
                    <script>
                        console.log = function(msg) {
                            document.getElementById('output').innerHTML += msg + '<br>';
                        };
                        try {
                            ${code}
                        } catch (error) {
                            document.getElementById('output').innerHTML = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
                        }
                    </script>
                </body>
                </html>
                `;
            }
        }

        // Status indicator
        function updateStatus() {
            const indicator = document.getElementById('statusIndicator');
            if (navigator.onLine) {
                indicator.className = 'status-indicator status-online';
            } else {
                indicator.className = 'status-indicator status-offline';
            }
        }

        // Initialize
        window.addEventListener('load', () => {
            updateStatus();
            
            const savedCode = localStorage.getItem('neuro-ide-code');
            if (savedCode) {
                document.getElementById('codeEditor').value = savedCode;
            }
            
            window.addEventListener('online', updateStatus);
            window.addEventListener('offline', updateStatus);
            
            addMessage('üöÄ neuro-ide PWA –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞.', 'system');
        });
    </script>
</body>
</html>